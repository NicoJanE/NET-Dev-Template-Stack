{
  // Depends on: file in project root 'Directory.Build.props' 

  "version": "2.0.0",
  "tasks": [
    // ==================== DOCKER TASKS ====================
    {
      "label": "build (Docker)",
      "command": "dotnet",
      "type": "shell",
      "args": [
        "build",
        "/hostmount/workspace/your-app/your-app.csproj",
        "/property:GenerateFullPaths=true",
        "/consoleLoggerParameters:NoSummary",     
        "/property:BaseIntermediateOutputPath=obj_lin/",      // REMARK 1: These BaseIntermediateOutputPath and BaseOutputPath settings duplicate what's in Directory.Build.props.
        "/property:BaseOutputPath=bin_lin/"                   //           This redundancy is intentional: if Directory.Build.props is missing, the build will still use the correct
      ],                                                      //           output directories instead of defaulting to obj/ and bin/.
                                                              // WARNING:  Without Directory.Build.props, builds work BUT switching between Windows and Linux builds will cause
                                                              //           file conflicts and errors due to mixing platform-specific binaries in the same directories.
      "problemMatcher": "$msCompile",
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "options": {
         "env": {
            "ASPNETCORE_ENVIRONMENT": "Development",
            "ASPNETCORE_URLS":"http://0.0.0.0:5000"
          }
        }
    },
    {
      "label": "publish (Docker)",
      "command": "dotnet",
      "type": "shell",
      "args": [
        "publish",
        "/hostmount/workspace/your-app/your-app.csproj",
        "/property:GenerateFullPaths=true",
        "/consoleLoggerParameters:NoSummary",
        "/property:BaseIntermediateOutputPath=obj_lin/",        // See: REMARK 1 on the top
        "/property:BaseOutputPath=bin_lin/"
      ],
      "problemMatcher": "$msCompile",
      "options": {
         "env": {
           "ASPNETCORE_ENVIRONMENT": "Development",
           "ASPNETCORE_URLS":"http://0.0.0.0:5000"
          }
        }
    },
    {
      "label": "watch (Docker)",
      "command": "dotnet",
      "type": "shell",
      "args": [
        "watch",
        "--no-launch-profile",
        "run",
        "--project",
        "/hostmount/workspace/your-app/your-app.csproj",
        "--property:BaseIntermediateOutputPath=obj_lin/",       // See: REMARK 1 on the top
        "--property:BaseOutputPath=bin_lin/"
      ],
      "problemMatcher": "$msCompile",
      "isBackground": true,
      "options": {
         "env": {
           "ASPNETCORE_ENVIRONMENT": "Development",
           "ASPNETCORE_URLS":"http://0.0.0.0:5000",
           "DOTNET_USE_POLLING_FILE_WATCHER": "true"
          }
        }      
    },

    // ==================== WINDOWS TASKS ====================
    {
        "label": "build (Windows)",
        "command": "dotnet",
        "type": "process",
        "args": [
          "build",
          "${workspaceFolder}\\your-app.csproj",
          "/property:GenerateFullPaths=true",
          "/consoleLoggerParameters:NoSummary",
          "/property:BaseIntermediateOutputPath=obj_win\\",      // See: REMARK 1 on the top
          "/property:BaseOutputPath=bin_win\\"
        ],
        "problemMatcher": "$msCompile",
        "group": {
          "kind": "build",
          "isDefault": false
        },
        "options": {
            "env": {
           "ASPNETCORE_ENVIRONMENT": "Development",
           "ASPNETCORE_URLS":"http://0.0.0.0:5000"
            }
          }
      },
      {
        "label": "publish (Windows)",
        "command": "dotnet",
        "type": "process",
        "args": [
          "publish",
          "${workspaceFolder}\\your-app.csproj",
          "/property:GenerateFullPaths=true",
          "/consoleLoggerParameters:NoSummary",
          "/property:BaseIntermediateOutputPath=obj_win\\",      // See: REMARK 1 on the top
          "/property:BaseOutputPath=bin_win\\"
        ],
        "problemMatcher": "$msCompile",
        "options": {
          "env": {
           "ASPNETCORE_ENVIRONMENT": "Development",
           "ASPNETCORE_URLS":"http://0.0.0.0:5000"
          }
        }
      },
      {
        "label": "watch (Windows)",
        "command": "dotnet",
        "type": "process",
        "args": [
          "watch",
          "run",
          "--no-launch-profile",
          "--project",
          "${workspaceFolder}\\your-app.csproj",
          "--property:BaseIntermediateOutputPath=obj_win\\",      // See: REMARK 1 on the top
          "--property:BaseOutputPath=bin_win\\"
        ],
        "problemMatcher": "$msCompile",
        "isBackground": true,
         "options": {
           "env": {
           "ASPNETCORE_ENVIRONMENT": "Development",
           "ASPNETCORE_URLS":"http://0.0.0.0:5000"
          }
        }
      }
  ]
}